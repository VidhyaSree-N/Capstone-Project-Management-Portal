{"ast":null,"code":"var _jsxFileName = \"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/forms/DeleteStudentForm.js\",\n  _s = $RefreshSig$();\nimport { useNavigate } from \"react-router-dom\";\nimport ConfirmationPopup from \"./ConfimationPopup\";\nimport ErrorMessagePopup from \"./ErrorMessagePopup\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DeleteStudentForm(_ref) {\n  _s();\n  let {\n    student,\n    data,\n    setData\n  } = _ref;\n  const [open, setOpen] = React.useState(false);\n  const navigate = useNavigate();\n  async function onYes() {\n    try {\n      console.log(data._id);\n      console.log(student._id);\n      const response = await axios.delete(\"/api/courses/student\", {\n        data: {\n          courseId: data._id,\n          studentId: student._id\n        },\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const updateUsers = data.users.filter(user => user._id !== student._id);\n      const updatedData = {\n        ...data,\n        users: updateUsers\n      };\n      setData(updatedData);\n    } catch (err) {\n      switch (err.response.status) {\n        case 401:\n          setOpen(false);\n          navigate(\"/sigin\", {\n            replace: true\n          });\n          break;\n        case 404:\n          setOpen(false);\n          /*#__PURE__*/_jsxDEV(ErrorMessagePopup, {\n            message: \"Student/ course not found\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 21\n          }, this);\n          break;\n        default:\n          setOpen(false);\n          /*#__PURE__*/_jsxDEV(ErrorMessagePopup, {\n            message: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 21\n          }, this);\n          break;\n      }\n    }\n  }\n  function onNo() {\n    setOpen(false);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(true),\n      children: \"Delete\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), open && /*#__PURE__*/_jsxDEV(ConfirmationPopup, {\n      message: \"Are you sure you want to delete this student ?\",\n      onYes: onYes,\n      onNo: onNo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(DeleteStudentForm, \"YUK7oHXSEMieGazmkICo5Lb28go=\", false, function () {\n  return [useNavigate];\n});\n_c = DeleteStudentForm;\nvar _c;\n$RefreshReg$(_c, \"DeleteStudentForm\");","map":{"version":3,"names":["useNavigate","ConfirmationPopup","ErrorMessagePopup","React","axios","jsxDEV","_jsxDEV","DeleteStudentForm","_ref","_s","student","data","setData","open","setOpen","useState","navigate","onYes","console","log","_id","response","delete","courseId","studentId","headers","updateUsers","users","filter","user","updatedData","err","status","replace","message","fileName","_jsxFileName","lineNumber","columnNumber","onNo","children","onClick","_c","$RefreshReg$"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/forms/DeleteStudentForm.js"],"sourcesContent":["import { useNavigate } from \"react-router-dom\";\nimport ConfirmationPopup from \"./ConfimationPopup\";\nimport ErrorMessagePopup from \"./ErrorMessagePopup\";\nimport React from \"react\";\nimport axios from \"axios\";\n\nexport default function DeleteStudentForm({student, data, setData}) {\n\n    const [open, setOpen] = React.useState(false);\n    const navigate = useNavigate();\n\n    async function onYes() {\n        try {\n            console.log(data._id);\n            console.log(student._id);\n            const response = await axios.delete(\"/api/courses/student\", {\n                data: { courseId: data._id, studentId: student._id },\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            });\n            \n\n            const updateUsers = data.users.filter(user => user._id !== student._id);\n            const updatedData = { ...data, users: updateUsers };\n            setData(updatedData);\n        } catch (err) {\n            switch (err.response.status) {\n                case 401 :\n                    setOpen(false);\n                    navigate(\"/sigin\", {replace: true});\n                    break;\n                case 404: \n                    setOpen(false);\n                    <ErrorMessagePopup message={\"Student/ course not found\"} />\n                    break;\n                default:\n                    setOpen(false);\n                    <ErrorMessagePopup message={\"\"} />\n                    break;\n            }\n        }\n    }\n\n    function onNo() {\n        setOpen(false);\n    }\n\n    return (\n        <div>\n            <button onClick={()=>setOpen(true)}>Delete</button>\n            {open && <ConfirmationPopup  message={\"Are you sure you want to delete this student ?\"}  onYes={onYes} onNo={onNo} />}\n        </div>\n    )\n}"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,iBAAiB,MAAM,oBAAoB;AAClD,OAAOC,iBAAiB,MAAM,qBAAqB;AACnD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,iBAAiBA,CAAAC,IAAA,EAA2B;EAAAC,EAAA;EAAA,IAA1B;IAACC,OAAO;IAAEC,IAAI;IAAEC;EAAO,CAAC,GAAAJ,IAAA;EAE9D,MAAM,CAACK,IAAI,EAAEC,OAAO,CAAC,GAAGX,KAAK,CAACY,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMC,QAAQ,GAAGhB,WAAW,EAAE;EAE9B,eAAeiB,KAAKA,CAAA,EAAG;IACnB,IAAI;MACAC,OAAO,CAACC,GAAG,CAACR,IAAI,CAACS,GAAG,CAAC;MACrBF,OAAO,CAACC,GAAG,CAACT,OAAO,CAACU,GAAG,CAAC;MACxB,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,MAAM,CAAC,sBAAsB,EAAE;QACxDX,IAAI,EAAE;UAAEY,QAAQ,EAAEZ,IAAI,CAACS,GAAG;UAAEI,SAAS,EAAEd,OAAO,CAACU;QAAI,CAAC;QACpDK,OAAO,EAAE;UACL,cAAc,EAAE;QACpB;MACJ,CAAC,CAAC;MAGF,MAAMC,WAAW,GAAGf,IAAI,CAACgB,KAAK,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACT,GAAG,KAAKV,OAAO,CAACU,GAAG,CAAC;MACvE,MAAMU,WAAW,GAAG;QAAE,GAAGnB,IAAI;QAAEgB,KAAK,EAAED;MAAY,CAAC;MACnDd,OAAO,CAACkB,WAAW,CAAC;IACxB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACV,QAAQA,GAAG,CAACV,QAAQ,CAACW,MAAM;QACvB,KAAK,GAAG;UACJlB,OAAO,CAAC,KAAK,CAAC;UACdE,QAAQ,CAAC,QAAQ,EAAE;YAACiB,OAAO,EAAE;UAAI,CAAC,CAAC;UACnC;QACJ,KAAK,GAAG;UACJnB,OAAO,CAAC,KAAK,CAAC;UACd,aAAAR,OAAA,CAACJ,iBAAiB;YAACgC,OAAO,EAAE;UAA4B;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAG;UAC3D;QACJ;UACIxB,OAAO,CAAC,KAAK,CAAC;UACd,aAAAR,OAAA,CAACJ,iBAAiB;YAACgC,OAAO,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,QAAG;UAClC;MAAM;IAElB;EACJ;EAEA,SAASC,IAAIA,CAAA,EAAG;IACZzB,OAAO,CAAC,KAAK,CAAC;EAClB;EAEA,oBACIR,OAAA;IAAAkC,QAAA,gBACIlC,OAAA;MAAQmC,OAAO,EAAEA,CAAA,KAAI3B,OAAO,CAAC,IAAI,CAAE;MAAA0B,QAAA,EAAC;IAAM;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAS,EAClDzB,IAAI,iBAAIP,OAAA,CAACL,iBAAiB;MAAEiC,OAAO,EAAE,gDAAiD;MAAEjB,KAAK,EAAEA,KAAM;MAACsB,IAAI,EAAEA;IAAK;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACnH;AAEd;AAAC7B,EAAA,CAhDuBF,iBAAiB;EAAA,QAGpBP,WAAW;AAAA;AAAA0C,EAAA,GAHRnC,iBAAiB;AAAA,IAAAmC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}