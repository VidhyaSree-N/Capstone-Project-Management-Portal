{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import ConfirmationPopup from'./ConfimationPopup';import axios from'axios';import ErrorMessagePopup from'./ErrorMessagePopup';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DeleteCourseForm(_ref){var _id=_ref._id,setData=_ref.setData,data=_ref.data;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),errorMessage=_React$useState2[0],setErrorMessage=_React$useState2[1];var navigate=useNavigate();var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),open=_React$useState4[0],setOpen=_React$useState4[1];var message=\"Are you sure you want to delete this course ?\";function onYes(){return _onYes.apply(this,arguments);}function _onYes(){_onYes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var updatedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.delete(\"/api/course/\".concat(_id));case 3:updatedData=data.filter(function(course){return course._id!==_id;});setData(updatedData);setOpen(false);_context.next=27;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setOpen(false);if(!_context.t0.response){_context.next=25;break;}_context.t1=_context.t0.response.status;_context.next=_context.t1===401?15:_context.t1===404?17:_context.t1===400?19:21;break;case 15:navigate(\"/signin\",{replace:true});return _context.abrupt(\"break\",23);case 17:setErrorMessage(\"Course doesn't exist.\");return _context.abrupt(\"break\",23);case 19:setErrorMessage(\"Missing Course id.\");return _context.abrupt(\"break\",23);case 21:setErrorMessage(\"Internal server error. Please try again.\");return _context.abrupt(\"break\",23);case 23:_context.next=27;break;case 25:console.log(_context.t0);setErrorMessage(\"An unknown error occurred. Please try again.\");case 27:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return _onYes.apply(this,arguments);}function onNo(){setOpen(false);}return/*#__PURE__*/_jsxs(\"div\",{children:[errorMessage&&/*#__PURE__*/_jsx(ErrorMessagePopup,{message:errorMessage}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(true);},children:\"Delete\"}),open&&/*#__PURE__*/_jsx(ConfirmationPopup,{message:message,onYes:onYes,onNo:onNo})]});}export default DeleteCourseForm;","map":{"version":3,"names":["React","ConfirmationPopup","axios","ErrorMessagePopup","useNavigate","jsx","_jsx","jsxs","_jsxs","DeleteCourseForm","_ref","_id","setData","data","_React$useState","useState","_React$useState2","_slicedToArray","errorMessage","setErrorMessage","navigate","_React$useState3","_React$useState4","open","setOpen","message","onYes","_onYes","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","updatedData","wrap","_callee$","_context","prev","next","delete","concat","filter","course","t0","response","t1","status","replace","abrupt","console","log","stop","onNo","children","onClick"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/forms/deleteCourseForm.js"],"sourcesContent":["import React from 'react';\nimport ConfirmationPopup from './ConfimationPopup';\nimport axios from 'axios';\nimport ErrorMessagePopup from './ErrorMessagePopup';\nimport { useNavigate } from 'react-router-dom';\n\nfunction DeleteCourseForm({_id , setData , data}) {\n\n    const [errorMessage, setErrorMessage] = React.useState('');\n    const navigate = useNavigate();\n    const [open, setOpen] = React.useState(false);\n    const message = \"Are you sure you want to delete this course ?\"\n\n    async function onYes() {\n        try {\n          await axios.delete(`/api/course/${_id}`);\n          const updatedData = data.filter(course => course._id !== _id);\n          setData(updatedData);\n          setOpen(false);\n        } catch (error) {\n          setOpen(false);\n          if (error.response) {\n            switch (error.response.status) {\n              case 401:\n                navigate(\"/signin\", { replace: true });\n                break;\n              case 404:\n                setErrorMessage(\"Course doesn't exist.\");\n                break;\n              case 400:\n                setErrorMessage(\"Missing Course id.\");\n                break;\n              default:\n                setErrorMessage(\"Internal server error. Please try again.\");\n                break;\n            }\n          } else {\n            console.log(error);\n            setErrorMessage(\"An unknown error occurred. Please try again.\");\n          }\n        }\n      }\n      \n\n    function onNo() {\n        setOpen(false);\n    }\n\n    return (\n        <div>\n            {errorMessage && \n                <ErrorMessagePopup message={errorMessage} /> }\n            <button onClick={()=>setOpen(true)} >Delete</button>\n            {open && <ConfirmationPopup message={message}  onYes={onYes} onNo={onNo} />}\n        </div>\n    )\n}\n\nexport default DeleteCourseForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}