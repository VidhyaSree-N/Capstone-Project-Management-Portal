{"ast":null,"code":"var _jsxFileName = \"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/project/PublishProjects.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport SendInviteLinkForm from 'components/forms/SendInviteLinkForm';\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport ConfirmationPopup from 'components/forms/ConfimationPopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PublishProjects() {\n  _s();\n  const navigate = useNavigate();\n  const [popup, setPopup] = React.useState(false);\n  const [clients, setClients] = React.useState([]);\n  const [selectedClient, setSelectedClient] = React.useState(\"\");\n  const handleChange = client => {\n    setClients([client, ...clients]);\n  };\n  React.useEffect(() => {\n    async function fetchTableData() {\n      try {\n        const response = await axios.get('/api/users?role=CLIENT');\n        setClients(response.data);\n        console.log(response.data);\n        console.log(clients);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    fetchTableData();\n  }, []);\n  const handleYes = async () => {\n    try {\n      const response = await axios.delete('/api/user/' + selectedClient);\n      switch (response.status) {\n        case 200:\n          console.log(\"Deleted successfully\");\n          setPopup(false);\n          setClients(clients.filter(p => p.email !== selectedClient));\n          setSelectedClient(\"\");\n          break;\n        case 401:\n          console.log(\"Unauthorized to delete\");\n          navigate(\"/signin\", {\n            replace: true\n          });\n          break;\n        case 404:\n          console.log(\"Cannot find the client\");\n          break;\n        case 409:\n          console.log(\"Cannot delete self\");\n          break;\n        default:\n          console.log(\"server error\");\n          break;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleNo = event => {\n    setPopup(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(SendInviteLinkForm, {\n      handleChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), popup && /*#__PURE__*/_jsxDEV(ConfirmationPopup, {\n      message: \"Are you sure you want to delete this item ?\",\n      onNo: handleNo,\n      onYes: handleYes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"S.No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Client Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Client email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Created On\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Role\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: clients.map((row, index) => {\n          return /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: index\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: row.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: row.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: row.createdAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: row.role\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => {\n                  setSelectedClient(row.email);\n                  setPopup(true);\n                },\n                children: \"Remove\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 13\n            }, this)]\n          }, row._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 18\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(PublishProjects, \"f+cjpjsSl8Q5B6FynZVzSzLE/jQ=\", false, function () {\n  return [useNavigate];\n});\n_c = PublishProjects;\nexport default PublishProjects;\nvar _c;\n$RefreshReg$(_c, \"PublishProjects\");","map":{"version":3,"names":["React","SendInviteLinkForm","axios","useNavigate","ConfirmationPopup","jsxDEV","_jsxDEV","PublishProjects","_s","navigate","popup","setPopup","useState","clients","setClients","selectedClient","setSelectedClient","handleChange","client","useEffect","fetchTableData","response","get","data","console","log","error","handleYes","delete","status","filter","p","email","replace","handleNo","event","children","fileName","_jsxFileName","lineNumber","columnNumber","message","onNo","onYes","map","row","index","name","createdAt","role","onClick","_id","_c","$RefreshReg$"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/project/PublishProjects.js"],"sourcesContent":["import React from 'react';\nimport SendInviteLinkForm from 'components/forms/SendInviteLinkForm';\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport ConfirmationPopup from 'components/forms/ConfimationPopup';\n\nfunction PublishProjects() {\n\n  const navigate = useNavigate();\n  const [popup, setPopup] = React.useState(false);\n  const [clients, setClients] = React.useState([]);\n  const [selectedClient , setSelectedClient] = React.useState(\"\");\n  \n  const handleChange = (client) => {\n    setClients([client, ...clients]);\n  }\n\n  React.useEffect(() => {\n    async function fetchTableData() {\n      try {\n        const response = await axios.get('/api/users?role=CLIENT');\n        setClients(response.data);\n        console.log(response.data);\n        console.log(clients);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n      \n    fetchTableData();\n  }, []);\n\n\n  const handleYes = async() => {\n    try {\n      const response = await axios.delete('/api/user/'+ selectedClient);\n      switch (response.status) {\n        case (200):\n          console.log(\"Deleted successfully\");\n          setPopup(false);\n          setClients(clients.filter(p => p.email !== selectedClient));\n          setSelectedClient(\"\");\n          break;\n        case (401):\n          console.log(\"Unauthorized to delete\");\n          navigate(\"/signin\" , {replace: true});\n          break;\n\n        case(404):\n          console.log(\"Cannot find the client\");\n          break;\n\n        case(409):\n          console.log(\"Cannot delete self\");\n          break;\n        \n        default:\n          console.log(\"server error\");\n          break;\n      }\n      \n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const handleNo = (event) => {\n    setPopup(false);\n  }\n\n  return (\n    <div>\n      <SendInviteLinkForm handleChange={handleChange} />\n      {popup && <ConfirmationPopup message=\"Are you sure you want to delete this item ?\"  onNo={handleNo} onYes={handleYes}/>}\n      <table>\n      {/* table headers */}\n      <thead>\n        <tr>\n          <th>S.No</th>\n          <th>Client Name</th>\n          <th>Client email</th>\n          <th>Created On</th>\n          <th>Role</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        {clients.map((row, index) => {\n          return(<tr key={row._id}>\n            {/* table rows */}\n            <td>{index}</td>\n            <td>{row.name}</td>\n            <td>{row.email}</td>\n            <td>{row.createdAt}</td>\n            <td>{row.role}</td>\n            <td>\n              <button onClick={() => {setSelectedClient(row.email); setPopup(true);}}>Remove</button>\n            </td>\n          </tr>\n          );\n        })}\n      </tbody>\n    </table>\n    </div>\n  );\n}\n\nexport default PublishProjects;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}