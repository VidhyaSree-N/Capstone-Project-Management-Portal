{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import axios from\"axios\";import\"../../styles/ProjectPreview.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProjectPreview(_ref){var projectId=_ref.projectId,handleClose=_ref.handleClose;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),project=_React$useState2[0],setProject=_React$useState2[1];React.useEffect(function(){function fetchPdf(){return _fetchPdf.apply(this,arguments);}function _fetchPdf(){_fetchPdf=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/project/\".concat(projectId,\"?pdf=false\"));case 3:response=_context.sent;if(response.status===500){console.log(\"project doesnt exist\");}else{setProject(response.data);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _fetchPdf.apply(this,arguments);}fetchPdf();},[projectId]);var downloadPDF=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,url,link;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/project/\".concat(projectId,\"?pdf=true\"),{responseType:\"blob\"});case 3:response=_context2.sent;url=window.URL.createObjectURL(new Blob([response.data]));link=document.createElement(\"a\");link.href=url;link.setAttribute(\"download\",\"\".concat(projectId,\".pdf\"));document.body.appendChild(link);link.click();link.parentNode.removeChild(link);_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](0);console.log(\"Error downloading PDF file\",_context2.t0);case 16:case\"end\":return _context2.stop();}},_callee2,null,[[0,13]]);}));return function downloadPDF(){return _ref2.apply(this,arguments);};}();if(!project){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"popup\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"popup-close\",onClick:handleClose,children:\"Close\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Project Title\"}),/*#__PURE__*/_jsx(\"p\",{children:project.name}),/*#__PURE__*/_jsx(\"h2\",{children:\"Skills\"}),/*#__PURE__*/_jsx(\"p\",{children:project.skills}),/*#__PURE__*/_jsx(\"h2\",{children:\"Resources\"}),/*#__PURE__*/_jsx(\"p\",{children:project.resources}),/*#__PURE__*/_jsx(\"h2\",{children:\"Administrators\"}),/*#__PURE__*/_jsx(\"p\",{children:project.administrators}),/*#__PURE__*/_jsx(\"h2\",{children:\"Deadline\"}),/*#__PURE__*/_jsx(\"p\",{children:project.deadline}),/*#__PURE__*/_jsx(\"button\",{className:\"popup-download\",onClick:downloadPDF,children:\"Download PDF\"})]})});}","map":{"version":3,"names":["React","axios","jsx","_jsx","jsxs","_jsxs","ProjectPreview","_ref","projectId","handleClose","_React$useState","useState","_React$useState2","_slicedToArray","project","setProject","useEffect","fetchPdf","_fetchPdf","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","concat","sent","status","console","log","data","t0","stop","downloadPDF","_ref2","_callee2","url","link","_callee2$","_context2","responseType","window","URL","createObjectURL","Blob","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","children","className","onClick","name","skills","resources","administrators","deadline"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/project/ProjectPreview.js"],"sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport \"../../styles/ProjectPreview.css\";\n\nexport default function ProjectPreview({ projectId, handleClose }) {\n    const [project, setProject] = React.useState({});\n    \n    React.useEffect(()=>{\n        async function fetchPdf() {\n        try {\n            const response = await axios.get(`/api/project/${projectId}?pdf=false`);\n            if (response.status === 500) {\n                console.log(\"project doesnt exist\");\n            } else {\n                setProject(response.data);\n            }\n        } catch (err) {\n            console.log(err);\n        }}\n        fetchPdf();\n    },[projectId]);\n\n    const downloadPDF = async () => {\n      try {\n        const response = await axios.get(`/api/project/${projectId}?pdf=true`, {\n          responseType: \"blob\",\n        });\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", `${projectId}.pdf`);\n        document.body.appendChild(link);\n        link.click();\n        link.parentNode.removeChild(link);\n      } catch (err) {\n        console.log(\"Error downloading PDF file\", err);\n      }\n    };\n    \n    if (!project) {\n        return <div>Loading...</div>;\n    }\n\n    return (\n      <div className=\"popup\">\n        <div className=\"popup-content\">\n          <button className=\"popup-close\" \n                onClick={handleClose} >Close</button>\n          <h2>Project Title</h2>\n          <p>{project.name}</p>\n          <h2>Skills</h2>\n          <p>{project.skills}</p>\n          <h2>Resources</h2>\n          <p>{project.resources}</p>\n          <h2>Administrators</h2>\n          <p>{project.administrators}</p>\n          <h2>Deadline</h2>\n          <p>{project.deadline}</p>\n          <button className=\"popup-download\" onClick={downloadPDF}>\n            Download PDF\n          </button>\n        </div>\n      </div>\n    );\n  }\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}