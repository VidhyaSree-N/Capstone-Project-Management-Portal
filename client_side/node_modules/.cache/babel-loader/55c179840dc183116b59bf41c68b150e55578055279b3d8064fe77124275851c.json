{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import ConfirmationPopup from'components/forms/ConfimationPopup';import PdfPreview from'./PdfPreview';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PendingProjects(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),popup=_useState4[0],setPopup=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),selectedProject=_useState6[0],setSelectedProject=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),preview=_useState8[0],setPreview=_useState8[1];// api call to get the table\nReact.useEffect(function(){function fetchTableData(){return _fetchTableData.apply(this,arguments);}function _fetchTableData(){_fetchTableData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/projects',{params:{pending:true}});case 3:response=_context.sent;setProjects(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _fetchTableData.apply(this,arguments);}fetchTableData();},[]);var handleClick=function handleClick(id){setPopup(true);setSelectedProject(id);};var handleClose=function handleClose(){setPreview(false);};var handleYes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(selectedProject);_context2.next=4;return axios.delete('/api/project/'+selectedProject);case 4:response=_context2.sent;_context2.t0=response.status;_context2.next=_context2.t0===200?8:_context2.t0===401?13:_context2.t0===404?16:_context2.t0===500?18:20;break;case 8:console.log(\"Deleted successfully\");setPopup(false);setProjects(projects.filter(function(p){return p._id!==selectedProject;}));setSelectedProject(\"\");return _context2.abrupt(\"break\",20);case 13:console.log(\"Unauthorized to delete\");navigate(\"/signin\",{replace:true});return _context2.abrupt(\"break\",20);case 16:console.log(\"Cannot find the project\");return _context2.abrupt(\"break\",20);case 18:console.log(\"server error\");return _context2.abrupt(\"break\",20);case 20:_context2.next=25;break;case 22:_context2.prev=22;_context2.t1=_context2[\"catch\"](0);console.log(_context2.t1);case 25:case\"end\":return _context2.stop();}},_callee2,null,[[0,22]]);}));return function handleYes(){return _ref.apply(this,arguments);};}();var handleNo=function handleNo(event){setPopup(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[popup&&/*#__PURE__*/_jsx(ConfirmationPopup,{message:\"Are you sure you want to delete this item ?\",onNo:handleNo,onYes:handleYes}),preview&&/*#__PURE__*/_jsx(PdfPreview,{projectId:selectedProject,onClose:handleClose}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Project Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Skills\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created On\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created By\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:projects.map(function(row,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){setSelectedProject(row._id);setPreview(true);},children:row.name}),/*#__PURE__*/_jsx(\"td\",{children:row.skills}),/*#__PURE__*/_jsx(\"td\",{children:row.createdAt}),/*#__PURE__*/_jsx(\"td\",{children:row.createdBy}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleClick(row._id);},children:\"Delete\"})})]},row._id);})})]})]});}export default PendingProjects;","map":{"version":3,"names":["React","useState","useNavigate","axios","ConfirmationPopup","PdfPreview","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PendingProjects","_useState","_useState2","_slicedToArray","projects","setProjects","navigate","_useState3","_useState4","popup","setPopup","_useState5","_useState6","selectedProject","setSelectedProject","_useState7","_useState8","preview","setPreview","useEffect","fetchTableData","_fetchTableData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","params","pending","sent","data","t0","console","log","stop","handleClick","id","handleClose","handleYes","_ref","_callee2","_callee2$","_context2","delete","status","filter","p","_id","abrupt","replace","t1","handleNo","event","children","message","onNo","onYes","projectId","onClose","map","row","index","onClick","name","skills","createdAt","createdBy"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/project/PendingProjects.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport ConfirmationPopup from 'components/forms/ConfimationPopup';\nimport PdfPreview from './PdfPreview';\n\nfunction PendingProjects() {\n\n  const [projects, setProjects] = useState([]);\n  const navigate = useNavigate();\n  const [popup, setPopup] = useState(false);\n  const [selectedProject, setSelectedProject] = useState(\"\");\n  const [preview ,setPreview] = useState(false);\n\n  // api call to get the table\n  React.useEffect(() => {\n    async function fetchTableData() {\n      try {\n        const response = await axios.get('/api/projects', {\n          params: {\n            pending: true\n          }\n        });\n        setProjects(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n      \n    fetchTableData();\n    }, []);\n  \n  const handleClick= (id) => {\n      setPopup(true);\n      setSelectedProject(id);\n  }\n\n  const handleClose = () => {\n    setPreview(false);\n  }\n\n  const handleYes = async() => {\n    try {\n      console.log(selectedProject)\n      const response = await axios.delete('/api/project/'+ selectedProject);\n      \n      switch (response.status) {\n        case (200):\n          console.log(\"Deleted successfully\");\n          setPopup(false);\n          setProjects(projects.filter(p => p._id !== selectedProject));\n          setSelectedProject(\"\");\n          break;\n        case (401):\n          console.log(\"Unauthorized to delete\");\n          navigate(\"/signin\" , {replace: true});\n          break;\n\n        case(404):\n          console.log(\"Cannot find the project\");\n          break;\n        \n        case(500):\n          console.log(\"server error\");\n          break;\n      }\n      \n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  const handleNo = (event) => {\n    setPopup(false);\n  }\n\n  return (\n    <>\n    {popup && <ConfirmationPopup message=\"Are you sure you want to delete this item ?\"  onNo={handleNo} onYes={handleYes}/>}\n    {preview && <PdfPreview projectId={selectedProject}  onClose={handleClose} />}\n    <table>\n      {/* table headers */}\n      <thead>\n        <tr>\n          <th>S.No</th>\n          <th>Project Name</th>\n          <th>Skills</th>\n          <th>Created On</th>\n          <th>Created By</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        {projects.map((row, index) => {\n          return(<tr key={row._id}>\n            {/* table rows */}\n            <td>{index}</td>\n            <td onClick={() => {setSelectedProject(row._id); setPreview(true);}}>{row.name}</td>\n            <td>{row.skills}</td>\n            <td>{row.createdAt}</td>\n            <td>{row.createdBy}</td>\n            <td>\n              <button onClick={() => handleClick(row._id)}>Delete</button>\n            </td>\n          </tr>\n          );\n        })}\n      </tbody>\n    </table>\n    </>\n  );\n}\n\nexport default PendingProjects;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}