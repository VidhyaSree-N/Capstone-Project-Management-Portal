{"ast":null,"code":"import _toConsumableArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import\"../../styles/ProjectSelectionPopup.css\";import{useNavigate}from\"react-router-dom\";import ErrorMessagePopup from\"./ErrorMessagePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SelectProjectsForCourse(_ref){var projects=_ref.projects,name=_ref.name,setData=_ref.setData;var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedProjects=_useState4[0],setSelectedProjects=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),allProjects=_useState6[0],setAllProjects=_useState6[1];useEffect(function(){// set the initially selected projects\nsetSelectedProjects(projects.map(function(project){return project._id;}));function getAllProjects(){return _getAllProjects.apply(this,arguments);}function _getAllProjects(){_getAllProjects=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/projects\");case 3:response=_context.sent;setAllProjects(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);navigate('/signin',{replace:true});case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _getAllProjects.apply(this,arguments);}getAllProjects();},[projects,navigate]);var handleProjectSelection=function handleProjectSelection(event){var projectId=event.target.value;if(event.target.checked){setSelectedProjects(function(prevState){return[].concat(_toConsumableArray(prevState),[projectId]);});}else{setSelectedProjects(function(prevState){return prevState.filter(function(id){return id!==projectId;});});}};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;console.log(selectedProjects);_context2.next=4;return axios.put(\"/api/courses/\".concat(name),{projects:selectedProjects},{headers:{'Content-Type':'application/json'}});case 4:response=_context2.sent;if(response.status===200){setData(response.data);onClose();}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();var onClose=function onClose(){setOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpen(true);},children:\" Add Projects \"}),open&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-background\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Select Projects\"}),/*#__PURE__*/_jsx(\"div\",{className:\"project-list\",children:allProjects.map(function(project){var isChecked=selectedProjects.includes(project._id);return/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:project._id,checked:isChecked,onChange:handleProjectSelection}),project.name]},project._id);})}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,children:\"Cancel\"})]})})]});}","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","ErrorMessagePopup","jsx","_jsx","jsxs","_jsxs","SelectProjectsForCourse","_ref","projects","name","setData","navigate","_useState","_useState2","_slicedToArray","open","setOpen","_useState3","_useState4","selectedProjects","setSelectedProjects","_useState5","_useState6","allProjects","setAllProjects","map","project","_id","getAllProjects","_getAllProjects","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","t0","replace","stop","handleProjectSelection","event","projectId","target","value","checked","prevState","concat","_toConsumableArray","filter","id","handleSubmit","_ref2","_callee2","_callee2$","_context2","console","log","put","headers","status","onClose","children","onClick","className","isChecked","includes","type","onChange"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/forms/SelectProjectsForCourse.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"../../styles/ProjectSelectionPopup.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport ErrorMessagePopup from \"./ErrorMessagePopup\";\n\nexport default function SelectProjectsForCourse({ projects , name, setData}) {\n\n\n  const navigate = useNavigate();\n  const [open, setOpen] = useState(false);\n  const [selectedProjects, setSelectedProjects] = useState([]);\n  const [allProjects, setAllProjects] = useState([]);\n\n  useEffect(() => {\n    // set the initially selected projects\n    setSelectedProjects(projects.map((project) => project._id));\n    \n    async function getAllProjects() {\n        try {\n            const response = await axios.get(\"/api/projects\");\n            setAllProjects(response.data);\n        } catch (err) {\n            navigate('/signin', {replace: true});\n        }\n    }\n\n    getAllProjects();\n\n  }, [projects, navigate]);\n\n  const handleProjectSelection = (event) => {\n    const projectId = event.target.value;\n    if (event.target.checked) {\n      setSelectedProjects((prevState) => [...prevState, projectId]);\n    } else {\n      setSelectedProjects((prevState) =>\n        prevState.filter((id) => id !== projectId)\n      );\n    }\n  };\n\n  const handleSubmit = async() => {\n    try {\n        \n        console.log(selectedProjects);\n        const response = await axios.put(`/api/courses/${name}`, { projects: selectedProjects },\n        { headers: { 'Content-Type': 'application/json' } });\n        \n\n        if (response.status === 200) {\n            setData(response.data);\n            onClose();\n        }\n        \n\n    } catch (err) {\n        console.log(err);\n    }\n  };\n\n  const onClose = () => {\n    setOpen(false);\n  }\n\n  return (\n    <div>\n\n    \n    <button onClick={()=>setOpen(true)}> Add Projects </button>\n    {open && \n      (<div className=\"popup-background\">\n      <div className=\"popup-content\">\n        <h2>Select Projects</h2>\n        <div className=\"project-list\">\n        {allProjects.map((project) => {\n            const isChecked = selectedProjects.includes(project._id);\n            return (<label key={project._id}>\n            <input\n                type=\"checkbox\"\n                value={project._id}\n                checked={isChecked}\n                onChange={handleProjectSelection}\n            />\n            {project.name}\n            </label>\n            )} ) }\n        </div>\n        <button onClick={handleSubmit}>Submit</button>\n        <button onClick={onClose}>Cancel</button>\n      </div>\n    </div>)}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}