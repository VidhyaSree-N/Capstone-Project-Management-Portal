{"ast":null,"code":"import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{Document,Page,pdfjs}from'react-pdf';import'../../styles/pdfPreview.css';// Import the CSS for the PDF preview component\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";pdfjs.GlobalWorkerOptions.workerSrc=\"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version,\"/pdf.worker.js\");function PdfPreview(_ref){var projectId=_ref.projectId,onClose=_ref.onClose;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),pdfUrl=_useState2[0],setPdfUrl=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),numPages=_useState4[0],setNumPages=_useState4[1];useEffect(function(){function fetchPdf(){return _fetchPdf.apply(this,arguments);}function _fetchPdf(){_fetchPdf=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,pdfBlobUrl;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/project/'+projectId,{responseType:'blob'});case 3:response=_context.sent;pdfBlobUrl=URL.createObjectURL(response.data);setPdfUrl(pdfBlobUrl);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return _fetchPdf.apply(this,arguments);}fetchPdf();},[projectId]);function onDocumentLoadSuccess(_ref2){var numPages=_ref2.numPages;setNumPages(numPages);}return/*#__PURE__*/_jsx(\"div\",{className:\"pdf-preview-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pdf-preview\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:onClose,children:\"Close\"}),/*#__PURE__*/_jsx(Document,{file:pdfUrl,onLoadSuccess:onDocumentLoadSuccess,children:Array.from(new Array(numPages),function(el,index){return/*#__PURE__*/_jsx(Page,{pageNumber:index+1},\"page_\".concat(index+1));})})]})});}export default PdfPreview;","map":{"version":3,"names":["React","useEffect","useState","axios","Document","Page","pdfjs","jsx","_jsx","jsxs","_jsxs","GlobalWorkerOptions","workerSrc","concat","version","PdfPreview","_ref","projectId","onClose","_useState","_useState2","_slicedToArray","pdfUrl","setPdfUrl","_useState3","_useState4","numPages","setNumPages","fetchPdf","_fetchPdf","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","pdfBlobUrl","wrap","_callee$","_context","prev","next","get","responseType","sent","URL","createObjectURL","data","t0","console","log","stop","onDocumentLoadSuccess","_ref2","className","children","onClick","file","onLoadSuccess","Array","from","el","index","pageNumber"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/components/project/PdfPreview.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport '../../styles/pdfPreview.css'; // Import the CSS for the PDF preview component\n\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nfunction PdfPreview({ projectId, onClose }) {\n  const [pdfUrl, setPdfUrl] = useState('');\n  const [numPages, setNumPages] = useState(null);\n\n  useEffect(() => {\n    async function fetchPdf() {\n      try {\n        const response = await axios.get('/api/project/'+ projectId, {\n          responseType: 'blob',\n        });\n        const pdfBlobUrl = URL.createObjectURL(response.data);\n        setPdfUrl(pdfBlobUrl);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    fetchPdf();\n  }, [projectId]);\n\n  function onDocumentLoadSuccess({ numPages }) {\n    setNumPages(numPages);\n  }\n\n  return (\n    <div className=\"pdf-preview-container\">\n      <div className=\"pdf-preview\">\n        <button className=\"close-btn\" onClick={onClose}>Close</button>\n        <Document\n          file={pdfUrl}\n          onLoadSuccess={onDocumentLoadSuccess}\n        >\n          {Array.from(\n            new Array(numPages),\n            (el, index) => (\n              <Page\n                key={`page_${index + 1}`}\n                pageNumber={index + 1}\n              />\n            ),\n          )}\n        </Document>\n      </div>\n    </div>\n  );\n}\n\nexport default PdfPreview;\n"],"mappings":"wdAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,IAAI,CAAEC,KAAK,KAAQ,WAAW,CACjD,MAAO,6BAA6B,CAAE;AAAA,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEtCJ,KAAK,CAACK,mBAAmB,CAACC,SAAS,4CAAAC,MAAA,CAA8CP,KAAK,CAACQ,OAAO,kBAAgB,CAE9G,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAAyB,IAAtB,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CACtC,IAAAC,SAAA,CAA4BjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IACxB,IAAAI,UAAA,CAAgCtB,QAAQ,CAAC,IAAI,CAAC,CAAAuB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5BxB,SAAS,CAAC,UAAM,SACC,CAAA2B,QAAQA,CAAA,SAAAC,SAAA,CAAAC,KAAA,MAAAC,SAAA,YAAAF,UAAA,EAAAA,SAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAvB,SAAAC,QAAA,MAAAC,QAAA,CAAAC,UAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE2B,CAAAvC,KAAK,CAACwC,GAAG,CAAC,eAAe,CAAE1B,SAAS,CAAE,CAC3D2B,YAAY,CAAE,MAChB,CAAC,CAAC,QAFIR,QAAQ,CAAAI,QAAA,CAAAK,IAAA,CAGRR,UAAU,CAAGS,GAAG,CAACC,eAAe,CAACX,QAAQ,CAACY,IAAI,CAAC,CACrDzB,SAAS,CAACc,UAAU,CAAC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,aAEtBU,OAAO,CAACC,GAAG,CAAAX,QAAA,CAAAS,EAAA,CAAO,CAAC,yBAAAT,QAAA,CAAAY,IAAA,MAAAjB,OAAA,gBAEtB,UAAAN,SAAA,CAAAC,KAAA,MAAAC,SAAA,GAEDH,QAAQ,EAAE,CACZ,CAAC,CAAE,CAACX,SAAS,CAAC,CAAC,CAEf,QAAS,CAAAoC,qBAAqBA,CAAAC,KAAA,CAAe,IAAZ,CAAA5B,QAAQ,CAAA4B,KAAA,CAAR5B,QAAQ,CACvCC,WAAW,CAACD,QAAQ,CAAC,CACvB,CAEA,mBACElB,IAAA,QAAK+C,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpC9C,KAAA,QAAK6C,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BhD,IAAA,WAAQ+C,SAAS,CAAC,WAAW,CAACE,OAAO,CAAEvC,OAAQ,CAAAsC,QAAA,CAAC,OAAK,EAAS,cAC9DhD,IAAA,CAACJ,QAAQ,EACPsD,IAAI,CAAEpC,MAAO,CACbqC,aAAa,CAAEN,qBAAsB,CAAAG,QAAA,CAEpCI,KAAK,CAACC,IAAI,CACT,GAAI,CAAAD,KAAK,CAAClC,QAAQ,CAAC,CACnB,SAACoC,EAAE,CAAEC,KAAK,qBACRvD,IAAA,CAACH,IAAI,EAEH2D,UAAU,CAAED,KAAK,CAAG,CAAE,UAAAlD,MAAA,CADTkD,KAAK,CAAG,CAAC,EAEtB,EACH,CACF,EACQ,GACP,EACF,CAEV,CAEA,cAAe,CAAAhD,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}