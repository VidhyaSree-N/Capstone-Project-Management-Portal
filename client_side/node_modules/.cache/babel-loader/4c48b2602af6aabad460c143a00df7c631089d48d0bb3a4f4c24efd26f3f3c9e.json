{"ast":null,"code":"import _toConsumableArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Footer from'components/Footer/footer';import Navbar from'components/Header/navbar';import axios from'axios';import CreateCourseForm from'components/forms/CreateCourseFomr';import DeleteCourseForm from'components/forms/deleteCourseForm';import React from'react';import Cookies from'js-cookie';import jwtDecode from'jwt-decode';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminCoursesPage(){var navigate=useNavigate();var token=Cookies.get(\"token\");var payload=jwtDecode(token);var role=payload.role;if(role!==\"ADMIN\"){navigate(\"/signin\",{replace:true});}var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),allCourses=_React$useState2[0],setAllCourses=_React$useState2[1];React.useEffect(function(){function getAllCourses(){return _getAllCourses.apply(this,arguments);}function _getAllCourses(){_getAllCourses=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/courses');case 3:response=_context.sent;if(response.status===200){setAllCourses(response.data);}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);// Handle the error as needed\nconsole.error('Error fetching courses:',_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return _getAllCourses.apply(this,arguments);}getAllCourses();},[]);function handleCourseNameClick(name){navigate(\"/courses/\".concat(name));}function handleChange(course){setAllCourses([course].concat(_toConsumableArray(allCourses)));}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CreateCourseForm,{handleChange:handleChange}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:allCourses.map(function(row,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{onClick:function onClick(){return handleCourseNameClick(row.name);},children:row.name}),/*#__PURE__*/_jsx(\"td\",{children:row.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(DeleteCourseForm,{_id:row._id,setData:setAllCourses,data:allCourses})})]},row._id);})})]})]});}","map":{"version":3,"names":["Footer","Navbar","axios","CreateCourseForm","DeleteCourseForm","React","Cookies","jwtDecode","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminCoursesPage","navigate","token","get","payload","role","replace","_React$useState","useState","_React$useState2","_slicedToArray","allCourses","setAllCourses","useEffect","getAllCourses","_getAllCourses","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","sent","status","data","t0","console","error","stop","handleCourseNameClick","name","concat","handleChange","course","_toConsumableArray","children","map","row","index","onClick","description","_id","setData"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/pages/AdminCousesPage.js"],"sourcesContent":["import Footer from 'components/Footer/footer';\nimport Navbar from 'components/Header/navbar';\nimport axios from 'axios';\nimport CreateCourseForm from 'components/forms/CreateCourseFomr';\nimport DeleteCourseForm from 'components/forms/deleteCourseForm';\nimport React from 'react';\nimport Cookies from 'js-cookie';\nimport jwtDecode from 'jwt-decode';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function AdminCoursesPage() {\n\n  const navigate = useNavigate();\n  const token = Cookies.get(\"token\");\n  const payload = jwtDecode(token);\n  const role = payload.role;\n  if (role !== \"ADMIN\") {\n    navigate(\"/signin\", {replace: true});\n  }\n\n  const [allCourses, setAllCourses] = React.useState([]);\n\n  React.useEffect(() => {\n    async function getAllCourses() {\n      try {\n        const response = await axios.get('/api/courses');\n\n        if (response.status === 200) {\n          setAllCourses(response.data);\n        }\n      } catch (error) {\n        // Handle the error as needed\n        console.error('Error fetching courses:', error);\n      }\n  }\n\n    getAllCourses();\n  }, []);\n\n  function handleCourseNameClick(name) {\n    navigate(`/courses/${name}`);\n  }\n\n  function handleChange(course) {\n    setAllCourses([course, ...allCourses]);\n  }\n\n  return (\n    <div>\n        \n        <CreateCourseForm handleChange={handleChange}/>\n        <table>\n            <thead>\n                <tr>\n                    <th>S.No</th>\n                    <th>Course Name</th>\n                    <th>Course Description</th>\n                    <th>Actions</th>\n                </tr>  \n            </thead>\n            <tbody>\n                {allCourses.map((row, index) => {\n                  return(<tr key={row._id}>\n                          {/* table rows */}\n                        <td>{index+1}</td>\n                        <td onClick={()=>handleCourseNameClick(row.name)}>{row.name}</td>\n                        <td>{row.description}</td>\n                        <td>\n                            <DeleteCourseForm _id={row._id} setData={setAllCourses} data={allCourses} />\n                        </td>\n                        </tr>\n                      );\n                      })}\n            </tbody>\n        </table>\n        \n        \n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}