{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import HomePage from'./pages/HomePage';import SigninPage from\"./pages/SigninPage\";import ForgotPasswordPage from'./pages/ForgotPasswordPage';import PageNotFound from'./pages/PageNotFound';import DashBoardPage from'./pages/DashBoardPage';import ProjectPage from'pages/ProjectPage';import jwt_decode from'jwt-decode';import CoursesPage from'pages/CoursesPage';import CoursePage from'pages/CoursePage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var isAdmin=function isAdmin(nextState,replace){try{var token=document.cookie.split('; ').find(function(row){return row.startsWith('token=');}).split('=')[1];var decodedToken=jwt_decode(token);var role=decodedToken.role;if(role!==\"ADMIN\"){replace({pathname:'/dashboard',state:{nextPathname:nextState.location.pathname}});}}catch(err){replace({pathname:'/signin',state:{nextPathname:nextState.location.pathname}});}};var isLoggedIn=function isLoggedIn(nextState,replace){try{var token=document.cookie.split('; ').find(function(row){return row.startsWith('token=');}).split('=')[1];var decodedToken=jwt_decode(token);var role=decodedToken.role;}catch(err){replace({pathname:'/signin',state:{nextPathname:nextState.location.pathname}});}};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",element:/*#__PURE__*/_jsx(SigninPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ForgotPasswordPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/project\",element:/*#__PURE__*/_jsx(ProjectPage,{}),onEnter:isAdmin}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(DashBoardPage,{}),onEnter:isLoggedIn}),/*#__PURE__*/_jsx(Route,{path:\"/courses\",element:/*#__PURE__*/_jsx(CoursesPage,{}),onEnter:isLoggedIn}),/*#__PURE__*/_jsx(Route,{path:\"/courses/:name\",element:/*#__PURE__*/_jsx(CoursePage,{}),onEnter:isLoggedIn}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(PageNotFound,{})})]})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","HomePage","SigninPage","ForgotPasswordPage","PageNotFound","DashBoardPage","ProjectPage","jwt_decode","CoursesPage","CoursePage","jsx","_jsx","jsxs","_jsxs","App","isAdmin","nextState","replace","token","document","cookie","split","find","row","startsWith","decodedToken","role","pathname","state","nextPathname","location","err","isLoggedIn","children","path","element","onEnter"],"sources":["/Users/cpms/Desktop/Capstone-Project-Management-System/client_side/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport SigninPage from \"./pages/SigninPage\";\nimport ForgotPasswordPage from './pages/ForgotPasswordPage';\nimport PageNotFound from './pages/PageNotFound';\nimport DashBoardPage from './pages/DashBoardPage';\nimport ProjectPage from 'pages/ProjectPage';\nimport jwt_decode from 'jwt-decode';\nimport CoursesPage from 'pages/CoursesPage';\nimport CoursePage from 'pages/CoursePage';\n\nfunction App() {\n\n  const isAdmin = (nextState, replace) => {\n    try {\n      const token = document.cookie.split('; ').find(row => row.startsWith('token=')).split('=')[1];\n      const decodedToken = jwt_decode(token);\n      const role = decodedToken.role;\n      if (role !== \"ADMIN\") {\n        replace({\n          pathname: '/dashboard',\n          state: { nextPathname: nextState.location.pathname },\n        });\n      } \n    } catch (err) {\n      replace({\n        pathname: '/signin',\n        state: { nextPathname: nextState.location.pathname },\n      });\n    } \n  }\n\n  const isLoggedIn = (nextState, replace) => {\n    try {\n      const token = document.cookie.split('; ').find(row => row.startsWith('token=')).split('=')[1];\n      const decodedToken = jwt_decode(token);\n      const role = decodedToken.role;\n    } catch (err) {\n      replace({\n        pathname: '/signin',\n        state: { nextPathname: nextState.location.pathname },\n      });\n    }\n  }\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<HomePage />} />\n        <Route path=\"/signin\" element={<SigninPage />} />\n        <Route path=\"/forgot-password\" element={<ForgotPasswordPage />} />\n        <Route path=\"/project\" element={<ProjectPage />} onEnter={isAdmin} />\n        <Route path=\"/dashboard\" element={<DashBoardPage />} onEnter={isLoggedIn} />\n        <Route path=\"/courses\" element={<CoursesPage />} onEnter={isLoggedIn} />\n        <Route path=\"/courses/:name\" element={<CoursePage />}  onEnter={isLoggedIn} />\n        <Route path='*' element={<PageNotFound />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}